---
export interface Props {
  pid: string;
}

const { pid = "1" } = Astro.props;

const endpoint =
  "https://api.themoviedb.org/3/movie/" +
  pid +
  "?api_key=" +
  import.meta.env.SECRET_KEY;

const response = await fetch(endpoint)
  .then((r) => r.json())
  .catch(function (error) {
    console.log(error);
  });

const movie = response;
---

<div class="px-6 h-full text-gray-800">
  <div
    class="flex xl:justify-center lg:justify-between justify-center items-center flex-wrap h-full g-6"
  >
    <div
      class="grow-0 shrink-1 md:shrink-0 basis-auto xl:w-6/12 lg:w-6/12 md:w-9/12 mb-12 md:mb-0"
    >
      <img
        class="w-full"
        src={"https://image.tmdb.org/t/p/w500" + movie.poster_path}
        alt={"Poster of " + movie.original_title}
      />
    </div>
    <div class="xl:ml-20 xl:w-5/12 lg:w-5/12 md:w-8/12 mb-12 md:mb-0">
      <h2 class="text-5xl font-bold">{movie.original_title}</h2>
      <a href="#" class="block py-4"
        ><svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-6 h-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"
          ></path>
        </svg>
      </a>
      <p class="py-4">{movie.overview}</p>
      <h3 class="text-lg font-bold">Information</h3>
      <ul class="text-sm leading-6">
        <li><strong>Adult:</strong> {JSON.stringify(movie.adult)}</li>
        <li><strong>Genres:</strong> {JSON.stringify(movie.genres)}</li>
        <li><strong>IMDB ID:</strong> {movie.imdb_id}</li>
        <li><strong>Original Language:</strong> {movie.original_language}</li>
        <li><strong>Original Title:</strong> {movie.original_title}</li>
        <li><strong>Homepage:</strong> {movie.homepage}</li>
        <li><strong>Popularity:</strong> {movie.popularity}</li>
        <li>
          <strong>Production Companies:</strong>
          {JSON.stringify(movie.production_companies)}
        </li>
        <li>
          <strong>Production Countries:</strong>
          {JSON.stringify(movie.production_countries)}
        </li>
        <li><strong>Release Date:</strong> {movie.release_date}</li>
        <li><strong>Runtime:</strong> {movie.runtime}</li>
        <li>
          <strong>Spoken Languages:</strong>
          {JSON.stringify(movie.spoken_languages)}
        </li>
        <li><strong>Status:</strong> {movie.status}</li>
        <li><strong>Tagline:</strong> {movie.tagline}</li>
        <li><strong>Video:</strong> {movie.video}</li>
        <li><strong>Vote Average:</strong> {movie.vote_average}</li>
        <li><strong>Vote Count:</strong> {movie.vote_count}</li>
      </ul>
    </div>
  </div>
</div>

<!-- {JSON.stringify(movie)} -->
